logs:
  configs:
  - clients:
    - basic_auth:
        password: {{GRAFANA_PASS}}
        username: {{GRAFANA_LOGS_USER}}
      url: https://logs-prod-eu-west-0.grafana.net/loki/api/v1/push
    name: integrations
    positions:
      filename: /tmp/positions.yaml
    target_config:
      sync_period: 10s
metrics:
  configs:
  - name: integrations
    remote_write:
    - basic_auth:
        password: {{GRAFANA_PASS}}
        username: {{GRAFANA_USER}}
      url: https://prometheus-prod-01-eu-west-0.grafana.net/api/prom/push
    scrape_configs:
    - job_name: integrations/nomad
      metrics_path: /v1/metrics
      scheme: https
      tls_config:
        cert_file: /etc/nomad.d/certs/client.pem
        key_file: /etc/nomad.d/certs/client-key.pem
        insecure_skip_verify: true
      params:
        format:
        - prometheus
      static_configs:
      - targets:
        - {{ private_ip }}:4646
    - job_name: integrations/consul
      metrics_path: /metrics
      params:
        format:
        - prometheus
      static_configs:
      - targets:
        - {{ private_ip }}:9107
  global:
    scrape_interval: 60s
  wal_directory: /tmp/grafana-agent-wal
server:
  http_listen_port: 12345